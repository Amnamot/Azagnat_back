import{C as F,T as ve,g as M,E as be,R as G,S as te,G as xe,D as qe,O as ce,V as Me,L as de,a as Le,b as ke,c as Te,d as ue,e as Ee,f as _e}from"https://arweave.net/SFd07sPGN4bLjC6i7PTVinPGA42o9R8TrYmaH1y5b-4";const Re=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))y(i);new MutationObserver(i=>{for(const t of i)if(t.type==="childList")for(const o of t.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&y(o)}).observe(document,{childList:!0,subtree:!0});function c(i){const t={};return i.integrity&&(t.integrity=i.integrity),i.referrerpolicy&&(t.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?t.credentials="include":i.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function y(i){if(i.ep)return;i.ep=!0;const t=c(i);fetch(i.href,t)}};Re();(()=>{let n=document.querySelectorAll(".setting-user div");document.querySelector(".main-title span").innerText=n[3].dataset.setting;let e=document.querySelector(".user-name");e.innerText=n[0].dataset.setting;let c,y=n[2].dataset.setting;if(y){let i=y,t=new XMLHttpRequest;t.open("GET",i),t.responseType="text",t.send(),t.onload=()=>{c=t.response;let o=document.querySelector(".avatar");o.src="data:image/png;base64,"+c}}})();function Ce(n,e,c){function y(t,o){e=o;let d=document.querySelector(".container3d"),r=d.clientWidth/d.clientHeight,m=(e.image?e.image.width/e.image.height:1)/r;e.offset.x=m>1?(1-1/m)/2:0,e.repeat.x=m>1?1/m:1,e.offset.y=m>1?0:(1-m)/2,e.repeat.y=m>1?1:m,t.background=e}i();function i(){if(c==="0"){let t=document.querySelector(".setting-background_color").dataset.setting,o=document.createElement("canvas");o.width=100,o.height=100;const d=o.getContext("2d");let r=d.createLinearGradient(0,0,100,100);r.addColorStop(0,t),r.addColorStop(1,t),d.fillStyle=r,d.fillRect(0,0,100,100);const u=new F(o);y(n,u);return}if(c==="1"){let t=document.querySelector(".setting-background_linear1").dataset.setting,o=document.querySelector(".setting-background_linear2").dataset.setting,d=document.createElement("canvas");d.width=100,d.height=100;const r=d.getContext("2d");let u=r.createLinearGradient(0,0,100,100);u.addColorStop(0,t),u.addColorStop(1,o),r.fillStyle=u,r.fillRect(0,0,100,100);const m=new F(d);y(n,m);return}if(c==="2"){let t=document.querySelector(".setting-background_radial1").dataset.setting,o=document.querySelector(".setting-background_radial2").dataset.setting,d=document.createElement("canvas");d.width=100,d.height=100;const r=d.getContext("2d");let u=r.createRadialGradient(50,50,25,50,50,50);u.addColorStop(0,t),u.addColorStop(1,o),r.fillStyle=u,r.fillRect(0,0,100,100);const m=new F(d);y(n,m)}if(c==="3"){let t,o=document.querySelector(".setting-background_custom").dataset.setting;if(o){let d=o,r=new XMLHttpRequest;r.open("GET",d),r.responseType="text",r.send(),r.onload=()=>{t=r.response;const u=document.createElement("canvas"),m=document.createElement("img");m.src="data:image/png;base64,"+t,setTimeout(()=>{u.width=m.naturalWidth,u.height=m.naturalHeight,u.getContext("2d").drawImage(m,0,0);const l=new F(u);y(n,l)},100)}}}c==="4"&&new ve().load(document.querySelector(".setting-background_image").dataset.setting,t=>{y(n,t)})}}function me(){const n=document.querySelector(".container3d").clientWidth,e=document.querySelector(".title-container"),c=document.querySelector(".container3d-footer"),y=document.querySelector(".main-title"),i=document.querySelector(".user-name"),t=document.querySelector(".avatar"),o=document.querySelector(".switch-mode__container"),d=document.querySelector(".switch-mode"),r=document.querySelector(".full-screen__container"),u=document.querySelector(".full-screen");e.style.padding=`${n/100*4}px`,c.style.padding=`${n/100*4}px`,y.style.fontSize=`${n/100*8}px`,i.style.fontSize=`${n/100*7}px`,t.style.top=`${n/100*4}px`,t.style.right=`${n/100*4}px`,t.style.width=`${n/100*20}px`,t.style.height=`${n/100*20}px`,o.style.width=`${n/100*15}px`,o.style.height=`${n/100*15}px`,d.style.width=`${n/100*15}px`,d.style.height=`${n/100*15}px`,r.style.width=`${n/100*15}px`,r.style.height=`${n/100*15}px`,u.style.width=`${n/100*15}px`,u.style.height=`${n/100*15}px`}let Ae=document.querySelector(".path__ticker").dataset.setting,Oe=document.querySelector(".path__ticker-font").dataset.setting,q,h,f;const w=Ee;let N="deftext",ee=document.querySelector(".switch-mode"),j=document.querySelector(".setting-user_birthday").dataset.setting;j=new Date(j);let ge=new Date,Pe=j.getDate()===ge.getDate()&&j.getMonth()===ge.getMonth();ee.addEventListener("click",()=>{N==="deftext"?(ee.style.background='url("https://arweave.net/iaBkLVU5Iw3NE_BRBavWW__TLmb89Mcot7rLQd32vm8") no-repeat center/cover',N="answer"):(ee.style.background='url("https://arweave.net/IhKJ0AatVeIgLedcQgpOAQ8gosYP1m7kiNFH06bVZwQ") no-repeat center/cover',N="deftext")});function Ie(){let n=document.querySelectorAll(".setting-ball div");const e=new Map,c=new w.LoadingManager,y=new xe(c),i=new qe;i.setDecoderPath(document.querySelector(".path__draco").dataset.setting),y.setDRACOLoader(i);const t=new w.TextureLoader(c);return new Promise((o,d)=>{c.onError=d,c.onProgress=(g,v,R)=>{if(document.querySelector(".preloader-element__scale").style.transform=`scaleX(${1-v/R})`,v===R){o(e);let T=document.querySelector(".preloader");M.timeline().to(T,{opacity:0,duration:1,delay:.5,ease:"none"}).to(T,{display:"none"})}},y.load(n[1].dataset.setting,g=>e.set("ball",g.scene));let r=document.querySelector(".setting-background_image").dataset.setting;const u=r?t.load(r):"";let m=document.querySelector(".setting-ball_body-env-map").dataset.setting;const s=m?t.load(m,g=>{g.mapping=be}):"";let l=document.querySelector(".setting-ball_body-albedo").dataset.setting;l?t.load(l,g=>{g.wrapS=g.wrapT=G,e.set("map",g)}):e.set("map","");let _=document.querySelector(".setting-ball_body-normal").dataset.setting;_?t.load(_,g=>{g.wrapS=g.wrapT=G,e.set("normal",g)}):e.set("normal","");let $=document.querySelector(".setting-ball_body-disp").dataset.setting;$?t.load($,g=>{g.wrapS=g.wrapT=G,e.set("disp",g)}):e.set("disp","");let D=document.querySelector(".setting-ball_body-r-map").dataset.setting;D?t.load(D,g=>{g.wrapS=g.wrapT=G,e.set("rough",g)}):e.set("rough",""),c.onLoad=()=>{e.set("bgTexture",u),e.set("envMap",s)};const H=new Image,x=new Image;H.addEventListener("load",function(){e.set("smaa-search",this),c.itemEnd("smaa-search")}),x.addEventListener("load",function(){e.set("smaa-area",this),c.itemEnd("smaa-area")}),c.itemStart("smaa-search"),c.itemStart("smaa-area"),H.src=te.searchImageDataURL,x.src=te.areaImageDataURL})}function ze(n){var le;const e=document.querySelector(".container3d"),c=e.clientWidth,y=e.clientHeight,i=c/y,t=new w.Clock;q=new w.WebGLRenderer({powerPreference:"high-performance",antialias:!1,stencil:!1,depth:!1}),q.setSize(c,y),q.setClearColor(15790320),window.innerWidth<=1920&&q.setPixelRatio(Math.min(1.5,window.devicePixelRatio));let o=document.documentElement.clientWidth>767;e.appendChild(q.domElement),h=new w.Scene,h.environment=n.get("envMap");let d=document.querySelector(".setting-background_type").dataset.setting,r,u;function m(){let p=30,a=e.clientWidth/e.clientHeight;u=p/a+e.clientWidth/e.clientHeight*10}m(),f=new w.PerspectiveCamera(u,i,1,300),f.lookAt(h.position),f.position.set(47,-64,126);let s=new ce(f,q.domElement);s.enableDamping=!1,s.enablePan=!1,s.enableZoom=!1,s.minDistance=50,s.maxDistance=300;let l=n.get("ball").children[0];h.add(l),l.rotation.set(Math.PI/2,0,0);let _=l.getObjectByName("Ball"),$=l.getObjectByName("Screen"),D=l.getObjectByName("Glass"),H=(le=l.getObjectByName("Border"))!=null?le:l.getObjectByName("Border001"),x=l.getObjectByName("Video");l.remove(D);let g=document.querySelector(".setting-screen_color").dataset.setting;_.material=new w.MeshStandardMaterial({emissiveIntensity:0,metalness:document.querySelector(".setting-ball_body-metalness").dataset.setting,roughness:document.querySelector(".setting-ball_body-roughness").dataset.setting,color:document.querySelector(".setting-ball_body-color").dataset.setting,map:n.get("map"),normalMap:n.get("normal"),roughnessMap:n.get("rough"),displacementMap:n.get("disp"),displacementScale:Number(document.querySelector(".setting-ball_body-dispScale").dataset.setting),side:w.DoubleSide,envMapIntensity:1.5}),_.material.needsUpdate,H.material=new w.MeshStandardMaterial({emissiveIntensity:0,metalness:.5,roughness:0,envMapIntensity:2,color:8289918}),$.material=new w.MeshBasicMaterial({color:g});let v;function R(){v=M.timeline({paused:!0}),v.to(l.position,{y:"+=2",yoyo:!0,repeat:-1,duration:2.3,ease:"sine.inOut",overwrite:"auto"}),v.to(l.position,{x:"+=2",yoyo:!0,repeat:-1,duration:4.2,ease:"sine.inOut",overwrite:"auto"},"<"),v.to(l.rotation,{y:`+=${w.MathUtils.degToRad(10)}`,yoyo:!0,repeat:-1,duration:3,ease:"sine.inOut",overwrite:"auto"},"<"),v.to(l.rotation,{x:`+=${w.MathUtils.degToRad(3)}`,yoyo:!0,repeat:-1,duration:3.5,ease:"sine.inOut",overwrite:"auto"},"<"),v.to(l.rotation,{z:`+=${w.MathUtils.degToRad(13)}`,yoyo:!0,repeat:-1,duration:15,ease:"sine.inOut",overwrite:"auto"},"<"),v.play()}let T;R();let C=0;function pe(){v&&v.kill();let p=M.timeline({onStart:()=>{window.removeEventListener("mouseup",A),window.removeEventListener("touchend",A),s.enabled&&(s.enabled=!1)},onComplete:()=>{ye()}});p.to(f.position,{x:0,y:0,z:o?65:80,duration:1,overwrite:"auto"}),p.to(l.position,{x:0,z:0,y:0,overwrite:"auto"},"<"),p.to(l.rotation,{x:Math.PI/2,z:0,y:0,overwrite:"auto"},"<")}let V=[],X,ne=document.querySelector(".setting-screen_video-path").dataset.setting;if(ne){let p=ne,a=new XMLHttpRequest;a.open("GET",p),a.responseType="text",a.send(),a.onload=()=>{X=JSON.parse(a.response);for(let S in X)V.push(X[S].dataTxId);Z()}}function I(p,a){const S=p-.5+Math.random()*(a-p+1);return Math.round(S)}let L=document.createElement("video");L.setAttribute("playsinline","playsinline"),L.setAttribute("crossorigin","anonymous"),L.defaultMuted=!0,L.autoplay=!0,L.loop=!0,L.src="https://www.arweave.net/kpcasNZAzduq-Ohk44h_LfA6v9IY67mqpnEcDCT9-Ts";let z=new Me(L);z.minFilter=de,z.magFilter=de,z.format=Le,z.anisotropy=q.capabilities.getMaxAnisotropy(),x.material=new w.MeshBasicMaterial({transparent:!0,opacity:1,map:z,color:g}),x.material.needsUpdate=!0;function Z(){C||(M.timeline().to(x.material,{onComplete:()=>{L.src=V[I(0,V.length-1)]},opacity:0,duration:1,ease:"none",overwrite:"auto"}).to(x.material,{opacity:1,duration:1,delay:1,ease:"none",overwrite:"auto"}),x.material.needsUpdate=!0,setTimeout(Z,5e3))}let E,he=Ae,B=new XMLHttpRequest;B.open("GET",he),B.responseType="text",B.send(),B.onload=()=>{E=JSON.parse(B.response)};function ye(){JSON.parse(localStorage.getItem("userObj"));let p=document.querySelectorAll(".setting-user div")[0].dataset.setting;M.to(x.material,{opacity:0,duration:1,overwrite:"auto"});let a=new _e;l.add(a);let S=N==="deftext"?E[0].texts[I(0,E[0].texts.length-1)]:E[1].texts[I(0,E[1].texts.length-1)];Pe&&N==="deftext"&&I(1,10)<=7&&(S=E[2].texts[I(0,E[2].texts.length-1)]),S=S.replace("#name#",p),a.text=S,a.fontSize=5,a.position.z=0,a.position.y=0,a.anchorX="-10%",a.anchorY="middle",a.textAlign="center",a.font=Oe,a.clipRect=document.querySelector(".setting-ball_name").dataset.setting==="Vega"?[-11,-10,11,10]:[-14,-10,14,10],a.textIndent=15,a.curveRadius=Number(document.querySelector(".setting-screen_curve-radius").dataset.setting),M.timeline({onComplete:()=>{setTimeout(Z,1200),l.remove(a),a.dispose();let b=M.timeline({onComplete:()=>{s.reset(),s=new ce(f,q.domElement),s.enablePan=!1,s.enableZoom=!1,s.minDistance=50,s.maxDistance=300,s.addEventListener("change",ae),C=0,setTimeout(R,100)}});b.to(l.rotation,{x:Math.PI/2,z:0,y:0,duration:1,overwrite:"auto"}),b.to(f.position,{x:47,y:-64,z:126,duration:1,overwrite:"auto"},"<")}}).to(a,{anchorX:`${100+(14/S.length).toFixed(3)*100}%`,duration:((S.length+15)/10).toFixed(3),ease:"none",overwrite:"auto"}),a.material=new w.MeshBasicMaterial({transparent:!0,opacity:1,color:document.querySelector(".setting-screen_ticker-color").dataset.setting}),a.rotation.set(w.MathUtils.degToRad(-90),w.MathUtils.degToRad(0),w.MathUtils.degToRad(0)),a.position.y=31}let U=0;function A(){U||(T=M.timeline({onStart:()=>{window.removeEventListener("mouseup",A),window.removeEventListener("touchend",A),U=1,s.enabled&&(s.enabled=!1)},onComplete:()=>{s.enabled||(s.enabled=!0),U=0,setTimeout(R,100)}}),T.to(l.position,{x:0,y:0,z:0,duration:1,ease:"power2.inOut",overwrite:"auto"}),T.to(l.rotation,{x:Math.PI/2,y:0,z:0}),T.to(f.position,{x:47,y:-64,z:126,duration:1,ease:"power2.inOut",overwrite:"auto"},"<"))}function ae(){v&&v.kill(),!C&&!U&&window.addEventListener("mouseup",A),!C&&!U&&window.addEventListener("touchend",A)}s.addEventListener("change",ae);const O=new ke(q,{frameBufferType:w.HalfFloatType}),fe=new te(n.get("smaa-search"),n.get("smaa-area")),we=new Te(h,f),Se=new ue(f,fe),oe=new ue(f);oe.renderToScreen=!0,O.addPass(we),O.addPass(Se),O.addPass(oe),window.addEventListener("resize",function(){let p=0;function a(){const S=e.clientWidth,P=e.clientHeight;f.aspect=S/P,f.updateProjectionMatrix(),O.setSize(S,P),m(),f.fov=u;let b=e.clientWidth/e.clientHeight,k=(h.background.image?h.background.image.width/h.background.image.height:1)/b;h.background.offset.x=k>1?(1-1/k)/2:0,h.background.repeat.x=k>1?1/k:1,h.background.offset.y=k>1?0:(1-k)/2,h.background.repeat.y=k>1?1:k,p=0,me()}return function(P){p===0&&(p=setTimeout(a,66,P))}}()),Ce(h,r,d);let re=s.getAzimuthalAngle(),Y=0,J=0;f.position.x;let Q=0;_.material.needsUpdate;function ie(){Q=s.getAzimuthalAngle()-re,(Q>.1||Q<-.1)&&J++,re=s.getAzimuthalAngle(),Y++,Y===30&&(Y=0,J>(o?22:18)&&!C&&(pe(),C=1),J=0),s.update(),requestAnimationFrame(ie),O.render(t.getDelta())}ie();let K=document.querySelector(".full-screen"),se=M.timeline({paused:!0}).to(".container3d",{onUpdate:()=>{const p=e.clientWidth,a=e.clientHeight;f.aspect=p/a,f.updateProjectionMatrix(),O.setSize(p,a),m(),f.fov=u,f.updateProjectionMatrix();let S=e.clientWidth/e.clientHeight,b=(h.background.image?h.background.image.width/h.background.image.height:1)/S;h.background.offset.x=b>1?(1-1/b)/2:0,h.background.repeat.x=b>1?1/b:1,h.background.offset.y=b>1?0:(1-b)/2,h.background.repeat.y=b>1?1:b},onComplete:()=>{K.style.background='url("https://arweave.net/GxxozpkT684Ye5OGL4oaKU6TZ7vZxnyKUC68bRR3i5c") no-repeat center/cover'},onReverseComplete:()=>{K.style.background='url("https://arweave.net/r1xZBYdXC7aarwtqqbgl6eAuVjsHs6TTyQmBsh9ne4Y") no-repeat center/cover'},width:"100%",height:"100%",borderRadius:0,borderWidth:0,duration:.5}),W=1;K.addEventListener("click",()=>{W===1?se.play():se.reverse(),W===1?W=0:W=1}),me()}Ie().then(ze).catch(console.error);
